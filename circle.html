<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>The Area of Intersecting Circles</title>

    <link rel="stylesheet" href="circle.css">
    <link rel="stylesheet" href="libs/sweet-alert/sweetalert.css">
    <script>
        delete window.require;
        delete window.exports;
        delete window.module;
    </script>
</head>
<body>
    <div id="circleDataId" class="circleDataClass">
        <p><b>Радиус движущиейся верхней пластины</b>
        <br>Upper R1 = <input type="text" name="upperR1"></p>

        <p><b>Радиус неподвижной нижней пластины</b>
        <br>Lower R2 = <input type="text" name="lowerR2"></p>

        <p><b>Радиус отверстия в верхней пластине</b>
        <br>R1 = <input type="text" name="R1"></p>

        <p><b>Радиус отверстия в нижней пластине</b>
        <br>R2 = <input type="text" name="R2"></p>

        <p><b>Расстояние от центра верхней пластины до центра отверстия</b>
        <br>LR1 = <input type="text" name="LR1"></p>

        <p><b>Расстояние от центра нижней пластины до центра отверстия</b>
        <br>LR2 = <input type="text" name="LR2"></p>

        <p><b>Угол поворота верхней пластины</b>
        <br>Angle = <input type="text" name="angle"></p>
        <br><button id="calculateIntersectingAreaId" class="calculateIntersectingAreaClass">Просчитать площадь пересечения</button>

    </div>
    <canvas id="coordinateSystemCircleId" class="coordinateSystemClass" width="500" height="500"></canvas>

    <!-- XenoScripts -->
    <script src="libs/jquery-3.1.1.min.js"></script>
    <script src="libs/sweet-alert/sweetalert.min.js"></script>

    <!-- Scripts for canvas graphic -->
    <script src="polygons-Sutherland-Hodgeman.js"></script>
    <script src="polygonsDrawer.js"></script>
    <script>
        var circleGrapgh = new Graph({
            canvasId: 'coordinateSystemCircleId',
            minX: -100,
            minY: -100,
            maxX: 100,
            maxY: 100,
            unitsPerTickX: 10,
            unitsPerTickY: 10
        });

        window.upperR1 = 0;
        window.lowerR2 = 0;
        window.R1 = 0;
        window.R2 = 0;
        window.LR1 = 0;
        window.LR2 = 0;
        window.angle = 0;

        /*
         K_d:=sqrt(sqr(K_p1)+sqr(K_p2)-2*K_p1*K_p2*cos(K_fi*pi/180));
         K_w1:=K_p1/K_r1;
         K_w2:=K_p2/K_r2;
         K_w:=K_r2/K_r1;
         K_cos_alpha:=(sqr(K_r2)-sqr(K_r1)-sqr(K_d))/(-2*K_r1*K_d);
         K_cos_beta:=(sqr(K_r1)-sqr(K_r2)-sqr(K_d))/(-2*K_r2*K_d);
         K_alpha:=arccos(K_cos_alpha)*180/pi;
         K_beta:=arccos(K_cos_beta)*180/pi;
         K_sin_alpha:=sin(K_alpha*pi/180);
         K_A:=K_sin_alpha;
         K_K:=(K_alpha*(pi/180)-0.5*sin(2*K_alpha*(pi/180))+sqr(K_w)*(K_beta*(pi/180)-0.5*sin(2*K_beta*(pi/180))))/pi;
         K_S_per:=K_K*pi*sqr(K_r1);

         K_p1 - это у вас lr1
         K_p2 - это у вас lr2
         K_r1 - это у вас а1=b1
         K_r2 - это у вас а2=b2
         K_S_per - площадь пересечения
         K_K - коэффициент пересеения
         */

        function sqr(number) {
            return Math.pow(number, 2);
        }

        $("#calculateIntersectingAreaId").click(function () {

            upperR1 = $("input[name='upperR1']").val();
            lowerR2 = $("input[name='lowerR2']").val();
            R1 = $("input[name='R1']").val();
            R2 = $("input[name='R2']").val();
            LR1 = $("input[name='LR1']").val();
            LR2 = $("input[name='LR2']").val();
            angle = $("input[name='angle']").val();

            var K_d = Math.sqrt(sqr(LR1) + sqr(LR2) -2 * LR1 * LR2 * Math.cos(angle * Math.PI/180));
            var K_w1 = LR1 / R1;
            var K_w2 = LR2 / R2;
            var K_w = R2 / R1;
            var K_cos_alpha = (sqr(R2) - sqr(R1) - sqr(K_d)) / (-2 * R1 * K_d);
            var K_cos_beta = (sqr(R1) - sqr(R2) - sqr(K_d)) / (-2 * R2 * K_d);
            var K_alpha = Math.acos(K_cos_alpha) * 180 / Math.PI;
            var K_beta = Math.acos(K_cos_beta) * 180 / Math.PI;
            var K_sin_alpha = Math.sin(K_alpha * Math.PI / 180);
            var K_A = K_sin_alpha;
            var K_K = (K_alpha * (Math.PI / 180) - 0.5 * sin (2 * K_alpha * (Math.PI / 180)) +
                sqr(K_w) * (K_beta * (Math.PI / 180) - 0.5 * Math.sin(2 * K_beta * (Math.PI / 180)))) / Math.PI;
            var K_S_per = K_K * Math.PI * sqr(R1);

        })
    </script>
</body>
</html>